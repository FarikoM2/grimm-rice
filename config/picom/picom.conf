# Configuración picom optimizada para máquina virtual (60hz)
# Enfoque: smooth, rápido, sin flicker

# ============ TRANSICIONES ============
transition = true;
transition-offset = 15;                    # Reducido para menos movimiento visual
transition-direction = "smart-x";          # Mantener smart para mejor UX
transition-timing-function = "ease-out-cubic";  # Suave pero no lineal
transition-step = 0.04;                    # Más rápido que 0.028 para VM
transition-rule = [];

# ============ FADING ============
fading = true;
fade-delta = 6;                            # Ligeramente más lento para suavidad
fade-in-step = 0.08;                       # Más rápido para percepción de velocidad
fade-out-step = 0.08;                      # Igual velocidad entrada/salida
fade-exclude = [
  "class_g = 'dmenu'",                     # Evitar fade en menús rápidos
  "class_g = 'rofi'"
];

# ============ OPACIDAD ============
inactive-opacity = 1.0;                   # Sin transparencia para mejor rendimiento
active-opacity = 1.0;
frame-opacity = 1.0;
inactive-opacity-override = false;

# ============ ANTI-FLICKER ============
shadow-ignore-shaped = true;              # Reducir cálculos innecesarios
wm-ignore = false;                        # Dejar que WM maneje algunos efectos

# ============ OPTIMIZACIONES VM ============
backend = "xrender";                      # Mejor para VMs con aceleración
vsync = false;                            # Importante para 60hz
glx-no-stencil = false;                   # Optimización para mejor rendimiento
glx-no-rebind-pixmap = false;             # Reducir overhead
use-damage = true;                        # Solo redibujar áreas cambiadas

# ============ ESQUINAS REDONDEADAS ============
corner-radius = 6;
round-borders = 1;

# ============ CONFIGURACIONES ADICIONALES ============
# Detectar ventanas redondeadas automáticamente
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;

# Sin blur para mejor rendimiento en VM
blur-background = false;

# Logs para debugging (opcional)
# log-level = "warn";
# log-file = "/tmp/picom.log";